<!DOCTYPE html>  
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz SIPAT</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f1fff5;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px;
      background-image: url('https://weex.digital/wp-content/uploads/2021/09/LOGO_SIPAT_02.png');
      background-repeat: no-repeat;
      background-position: right bottom;
      background-size: contain;
    }
    .container {
      background-color: rgba(92, 241, 112, 0.301);
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      padding: 30px;
      width: 100%;
      max-width: 600px;
      position: relative;
    }
    h1, h2 {
      text-align: center;
      color: #1824d4;
      margin-top: 0;
    }
    .header-icons {
      text-align: center;
      font-size: 48px;
      margin-bottom: 10px;
    }
    input, button, select {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #ffffff;
      font-size: 16px;
    }
    button {
      background-color: #000000;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #eaf1ea63;
    }
    #quizBox, #fimBox {
      display: none;
    }
    #perguntaTitulo {
      color: #2e7d32;
    }
    #opcoes button {
      background-color: #e0f2e9;
      color: #2e7d32;
      border: 1px solid #c8e6c9;
      margin-bottom: 10px;
    }
    #opcoes button:hover {
      background-color: #c8e6c9;
    }
    .assinatura {
      margin-top: 30px;
      text-align: center;
      font-size: 14px;
      color: #050101;
    }
    .mensagemFinal {
      background-color: #ffffff;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      margin-top: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<audio autoplay loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
  Seu navegador n√£o suporta √°udio.
</audio>

<div class="container">
  <div id="formBox">
    <div class="header-icons">ü¶∫ ‚õëÔ∏è</div>
    <h1>Quiz SIPAT</h1>
    <p>Preencha seus dados para come√ßar:</p>
    <input type="text" id="nome" placeholder="Seu nome" />
    <input type="text" id="setor" placeholder="Seu setor" />
    <select id="funcao">
      <option value="" disabled selected>Selecione sua fun√ß√£o</option>
      <option value="Agente de Limpeza">Agente de Limpeza</option>
      <option value="ASG">ASG</option>
      <option value="Auxiliar de El√©trica">Auxiliar de El√©trica</option>
      <option value="ADM">ADM</option>
      <option value="Eletricista">Eletricista</option>
      <option value="Encarregado">Encarregado</option>
    </select>
    <button onclick="iniciarQuiz()">Iniciar Quiz</button>
  </div>

  <div id="quizBox">
    <h2 id="perguntaTitulo"></h2>
    <div id="opcoes"></div>
  </div>

  <div id="fimBox">
    <h2>Parab√©ns, <span id="userNome"></span>!</h2>
    <p>Voc√™ acertou <strong><span id="acertos"></span></strong> de 8 perguntas.</p>
    <div id="mensagemEnvio" class="mensagemFinal">
      <p>‚úÖ Obrigado por participar!</p>
      <button onclick="alert('At√© a pr√≥xima! üòä')">OK</button>
      <button id="btnWhats" style="margin-top: 10px;">Confirmar Presen√ßa via WhatsApp</button>
    </div>
  </div>

  <div class="assinatura">Desenvolvido por <strong>Julie Tidre üîíü¶∫‚õëÔ∏è‚ö†Ô∏è</strong></div>
</div>

<script>
const perguntas = [
  { pergunta: "Qual √© o principal objetivo da SIPAT?", opcoes: ["Cobrar produtividade", "Promover seguran√ßa e sa√∫de no trabalho", "Fiscalizar faltas", "Premiar os melhores"], correta: 1, explicacao: "A SIPAT √© um evento voltado para promover a seguran√ßa e a sa√∫de dos trabalhadores." },
  { pergunta: "O que significa EPI?", opcoes: ["Equipe de Preven√ß√£o Imediata", "Equipamento de Prote√ß√£o Individual", "Elemento de Prote√ß√£o Industrial", "Estatuto de Preven√ß√£o Integrada"], correta: 1, explicacao: "EPI significa Equipamento de Prote√ß√£o Individual, usado para proteger o trabalhador contra riscos." },
  { pergunta: "Qual a atitude correta ao presenciar um ato inseguro?", opcoes: ["Ignorar", "Relatar √† lideran√ßa ou CIPA", "Filmar para postar", "Sair do local"], correta: 1, explicacao: "Voc√™ deve relatar qualquer ato inseguro √† lideran√ßa ou √† CIPA." },
  { pergunta: "Qual item abaixo √© um EPI?", opcoes: ["Capacete de seguran√ßa", "Bon√©", "Camiseta da empresa", "Crach√°"], correta: 0, explicacao: "Capacetes de seguran√ßa s√£o EPIs essenciais para proteger a cabe√ßa." },
  { pergunta: "Qual √© a cor mais comum usada para sinalizar perigo?", opcoes: ["Verde", "Azul", "Amarelo", "Vermelho"], correta: 3, explicacao: "A cor vermelha √© usada para indicar situa√ß√µes de perigo ou emerg√™ncia." },
  { pergunta: "Quem √© respons√°vel pela seguran√ßa no ambiente de trabalho?", opcoes: ["Somente a CIPA", "Somente o RH", "Todos os colaboradores", "A ger√™ncia"], correta: 2, explicacao: "Todos os colaboradores s√£o respons√°veis por manter um ambiente seguro." },
  { pergunta: "Por que √© importante usar EPIs?", opcoes: ["Porque s√£o obrigat√≥rios apenas em grandes empresas", "Para proteger a empresa de multas", "Para proteger a sa√∫de e a integridade do trabalhador", "Para deixar o uniforme mais bonito"], correta: 2, explicacao: "Os EPIs protegem a sa√∫de e a integridade f√≠sica do trabalhador." },
  { pergunta: "Qual destes √© um exemplo de EPI?", opcoes: ["Extintor de inc√™ndio", "Cinto de seguran√ßa para trabalho em altura", "Placa de sinaliza√ß√£o", "Escada"], correta: 1, explicacao: "O cinto de seguran√ßa tipo paraquedista √© um EPI essencial para trabalho em altura." }
];

let nome = "", setor = "", funcao = "";
let perguntasSelecionadas = [], respostasCertas = 0, indice = 0;

function embaralhar(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function iniciarQuiz() {
  nome = document.getElementById("nome").value.trim();
  setor = document.getElementById("setor").value.trim();
  funcao = document.getElementById("funcao").value;
  if (!nome || !setor || !funcao) {
    alert("Por favor, preencha todos os campos.");
    return;
  }
  embaralhar(perguntas);
  perguntasSelecionadas = perguntas.slice(0, 8);
  document.getElementById("formBox").style.display = "none";
  document.getElementById("quizBox").style.display = "block";
  mostrarPergunta();
}

function mostrarPergunta() {
  const q = perguntasSelecionadas[indice];
  document.getElementById("perguntaTitulo").innerText = `Pergunta ${indice + 1}: ${q.pergunta}`;
  const opcoesDiv = document.getElementById("opcoes");
  opcoesDiv.innerHTML = "";

  q.opcoes.forEach((opcao, i) => {
    const btn = document.createElement("button");
    btn.innerText = opcao;
    btn.onclick = () => {
      verificarResposta(i, q);
      btn.blur(); // Impede foco que marca op√ß√£o automaticamente
    };
    opcoesDiv.appendChild(btn);
  });
}

function verificarResposta(escolhida, perguntaObj) {
  const correta = perguntaObj.correta;
  const explicacao = perguntaObj.explicacao;
  const opcoesDiv = document.getElementById("opcoes");
  const resultado = document.createElement("p");
  resultado.style.fontWeight = "bold";
  resultado.style.marginTop = "15px";

  if (escolhida === correta) {
    respostasCertas++;
    resultado.innerText = "‚úÖ Resposta correta!";
    resultado.style.color = "green";
  } else {
    resultado.innerText = `‚ùå Resposta incorreta. A resposta certa √©: "${perguntaObj.opcoes[correta]}".`;
    resultado.style.color = "red";
  }

  const explicacaoP = document.createElement("p");
  explicacaoP.innerText = "üí° " + explicacao;
  explicacaoP.style.marginTop = "10px";

  opcoesDiv.innerHTML = "";
  opcoesDiv.appendChild(resultado);
  opcoesDiv.appendChild(explicacaoP);

  const proximoBtn = document.createElement("button");
  proximoBtn.innerText = indice + 1 === perguntasSelecionadas.length ? "Finalizar" : "Pr√≥xima";
  proximoBtn.onclick = () => {
    indice++;
    if (indice < perguntasSelecionadas.length) {
      mostrarPergunta();
    } else {
      finalizarQuiz();
    }
  };
  opcoesDiv.appendChild(proximoBtn);
}

function finalizarQuiz() {
  document.getElementById("quizBox").style.display = "none";
  document.getElementById("fimBox").style.display = "block";
  document.getElementById("userNome").innerText = nome;
  document.getElementById("acertos").innerText = respostasCertas;

  const erros = perguntasSelecionadas.length - respostasCertas;
  const numeroWhatsApp = "15991354756";
  const mensagem = `Ol√°! Eu confirmei minha presen√ßa na SIPAT com os seguintes dados:

üìõ Nome: ${nome}
üè¢ Setor: ${setor}
üë∑ Fun√ß√£o: ${funcao}
‚úÖ Acertos: ${respostasCertas}
‚ùå Erros: ${erros}`;

  const linkWhats = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensagem)}`;
  document.getElementById("btnWhats").onclick = () => {
    window.open(linkWhats, "_blank");
  };
}
</script>

</body>
</html>